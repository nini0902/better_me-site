<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>設定新目標 - Better Me</title>
  <link rel="stylesheet" href="../../src/styles/main.css"/>
</head>
<body>
  <div class="container">
    <div class="page-header">
      <h1>設定新目標</h1>
      <p class="subtitle">開始你的成長之旅</p>
    </div>

    <nav>
      <a href="../../index.html">首頁</a>
      <a href="list.html">目標列表</a>
      <a href="create.html" class="active">新增目標</a>
      <a href="../progress/track.html">進度追蹤</a>
    </nav>

    <main>
      <form id="goalForm" class="form-container">
        <!-- 類型 & 範本 -->
        <div class="form-row">
          <div class="form-group">
            <label for="goalType">目標型態</label>
            <select id="goalType" name="goalType" required>
              <option value="habit" selected>習慣（週期性）</option>
              <option value="project">專案（一次性）</option>
            </select>
          </div>
          <div class="form-group">
            <label for="goalCategory">目標類別</label>
            <select id="goalCategory" name="goalCategory" required>
              <option value="">選擇類別</option>
              <option value="health">健康</option>
              <option value="learning">學習</option>
              <option value="career">職涯</option>
              <option value="relationship">人際關係</option>
              <option value="finance">理財</option>
              <option value="other">其他</option>
            </select>
            <div class="hint">
              <button type="button" class="button-secondary" id="applyTemplate">套用常用範本</button>
            </div>
          </div>
        </div>

        <!-- 基本資料 -->
        <div class="form-group">
          <label for="goalTitle">目標名稱</label>
          <input type="text" id="goalTitle" name="goalTitle" placeholder="例如：每天喝水 2000 ml / 每天閱讀 20 分鐘" required>
        </div>

        <div class="form-group">
          <label for="goalDescription">目標描述（Why/How）</label>
          <textarea id="goalDescription" name="goalDescription" rows="4"
            placeholder="為什麼要做？要如何執行？遇到困難時的替代方案是什麼？" required></textarea>
        </div>

        <!-- SMART 可量化 -->
        <div class="form-row">
          <div class="form-group">
            <label for="quantValue">可量化目標（數值）</label>
            <input type="number" id="quantValue" min="0" step="1" placeholder="例如 2000 或 20">
          </div>
          <div class="form-group">
            <label for="quantUnit">單位</label>
            <input type="text" id="quantUnit" placeholder="例如：ml / 分鐘 / 次 / 頁">
          </div>
        </div>
        <p class="hint" id="smartHint"></p>

        <!-- 日期 -->
        <div class="form-row">
          <div class="form-group">
            <label for="startDate">開始日期</label>
            <input type="date" id="startDate" name="startDate" required>
          </div>
          <div class="form-group">
            <label for="targetDate">目標日期</label>
            <input type="date" id="targetDate" name="targetDate" required>
            <p class="hint"><span id="daysLeftText"></span></p>
          </div>
        </div>

        <!-- 習慣排程（僅 habit 顯示） -->
        <div id="habitBlock" class="card">
          <h3>習慣排程</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="freqType">頻率類型</label>
              <select id="freqType">
                <option value="perday" selected>每天固定量</option>
                <option value="perweek">每週幾次</option>
              </select>
            </div>
            <div class="form-group" id="freqValueWrap">
              <label for="freqValue">數值</label>
              <input type="number" id="freqValue" min="1" value="1" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="daytime">偏好時段</label>
              <select id="daytime">
                <option value="morning">早上</option>
                <option value="evening">晚上</option>
              </select>
            </div>
            <div class="form-group">
              <label for="restPerWeek">每週休息日</label>
              <select id="restPerWeek">
                <option value="0">0</option>
                <option value="1" selected>1</option>
                <option value="2">2</option>
              </select>
            </div>
          </div>
        </div>

        <!-- 里程碑 -->
        <div class="form-group">
          <label for="milestones">階段性目標</label>
          <div id="milestoneContainer">
            <div class="milestone-item">
              <input type="text" name="milestones[]" placeholder="新增一個里程碑…">
              <input type="number" name="weights[]" min="0" max="100" placeholder="權重（選填 %）" class="milestone-weight">
              <button type="button" class="button-secondary add-milestone">+</button>
            </div>
          </div>
        </div>

        <!-- 其他 -->
        <div class="form-row">
          <div class="form-group">
            <label for="tags">標籤（以逗號分隔）</label>
            <input type="text" id="tags" placeholder="例如：飲食, 早晨, 健康">
          </div>
          <div class="form-group">
            <label for="visibility">可見性</label>
            <select id="visibility">
              <option value="private" selected>私人</option>
              <option value="public">公開（未來可分享）</option>
            </select>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="button-primary">建立目標</button>
          <button type="reset" class="button-secondary" id="resetBtn">重設</button>
        </div>
      </form>
    </main>
  </div>

  <!-- 可選：未來要上雲可打開 GUN（JS 內已留 hook） -->
  <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
  <script src="../../src/js/goals.js"></script>
</body>
</html>
