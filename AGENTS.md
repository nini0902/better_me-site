# AGENTS.md

## 專案目標
- 建立一個純前端網站，協助失戀者設定自我成長目標，並自動生成改善計畫
- 使用 CDN 版本 JS 套件，資料儲存於 GUN.js，無後端需求
- 採用 TDD 流程，所有功能皆以測試驅動開發

## 專案結構
```
/
├── index.html          # 主頁面（已重新設計）
├── PRD.md             # 產品需求文檔
├── AGENTS.md          # 專案進度與規劃文檔
├── src/
│   ├── styles/        # CSS 樣式檔案
│   │   └── main.css
│   └── js/           # JavaScript 模組
│       └── core.js    # 核心資料管理（新增）
├── pages/
│   ├── goals/
│   │   ├── create.html    # 新增目標頁面（已簡化）
│   │   └── list.html      # 目標列表頁面（已優化）
│   └── progress/
│       └── track.html     # 進度追蹤頁面（已重新設計）
```

## 開發階段

### 第一階段：基礎建設 ✅ 已完成
- [x] 建立基本專案結構
- [x] 設計深色主題 UI 系統
- [x] 實作主要導航功能
- [x] 統一資料儲存 key（betterme:goals）

### 第二階段：UI/UX 簡化 ✅ 已完成 (2025-10-27)
- [x] 分析現有系統的複雜度問題
- [x] 簡化新增目標表單（12+ 欄位 → 7 個核心欄位）
- [x] 優化目標列表展示（卡片式設計、搜尋功能）
- [x] 重新設計進度追蹤頁面（核心功能聚焦）
- [x] 建立首頁快速操作卡片
- [x] 建立 GoalManager 統一資料管理類別

### 第三階段：核心功能完善 🔄 進行中
- [ ] 完善習慣排程生成算法
- [ ] 實作計畫自動建議功能
- [ ] 完成進度視覺化圖表
- [ ] 實作成就系統

### 第四階段：資料同步 ⏳ 待開始
- [ ] 整合 GUN.js 資料同步
- [ ] 實現跨裝置資料同步
- [ ] 建立備份和恢復機制

### 第五階段：擴充功能 ⏳ 待開始
- [ ] 加入激勵語錄功能
- [ ] 實作成就系統
- [ ] 社群分享功能
- [ ] 週期性回顧建議

## 技術堆疊
- 前端：純 JavaScript (ES6+)
- 資料庫：GUN.js（去中心化資料庫）
- 測試：Mocha + Chai（計劃）
- 樣式：原生 CSS（使用 CSS Variables）

## 開發進度紀錄

### 2025-10-20
1. 基礎建設
   - ✅ 建立專案基本結構
   - ✅ 設計深色主題 UI 系統
   - ✅ 實作主要導航功能

2. 使用者介面
   - ✅ 建立新增目標表單
   - ✅ 實作目標列表頁面
   - ✅ 設計目標卡片元件

3. 功能實作
   - ✅ 目標資料儲存功能
   - ✅ 目標搜尋過濾
   - ✅ 目標進度計算
   - ✅ 資料匯出功能

### 2025-10-27
1. 系統問題分析
   - ✅ 識別 UI/UX 複雜度問題
   - ✅ 發現資料儲存 key 不一致（goals vs betterme:goals）
   - ✅ 確認多個頁面版本重複問題

2. UI/UX 簡化工作
   - ✅ 簡化新增目標表單
     * 移除：目標類型切換、里程碑、權重、標籤、可見性、高級排程
     * 保留：標題、類別、描述、日期、數值、單位（共 7 個欄位）
   - ✅ 優化目標列表頁面
     * 卡片式設計，清晰展示進度
     * 搜尋功能簡化
     * 操作按鈕精簡（追蹤進度、刪除）
   - ✅ 重新設計進度追蹤頁面
     * 目標摘要卡片
     * 大進度條展示
     * 清爽任務列表
     * 快速操作按鈕

3. 首頁改進
   - ✅ 新增激勵性標語
   - ✅ 建立 3 個快速操作卡片
   - ✅ 展示 6 個核心功能特性

4. 核心模組建立
   - ✅ 建立 GoalManager 類別
     * getAllGoals() - 讀取所有目標
     * addGoal() - 新增目標
     * getGoal() - 取得單一目標
     * updateGoal() - 更新目標
     * deleteGoal() - 刪除目標
     * generateHabitSchedule() - 生成習慣排程
     * getGoalProgress() - 計算進度
     * getDaysRemaining() - 計算剩餘天數

## UX 流程改進

**原流程（複雜）：**
```
新增目標（複雜表單）→ 跳轉列表 → 點擊看詳情 → 再點擊追蹤進度
```

**新流程（簡化）：**
```
新增目標（簡單表單）→ 自動進度追蹤頁面 ← 即時反饋
```

## 功能對比

| 項目 | 之前 | 現在 |
|------|------|------|
| 表單欄位數 | 12+ | 7 |
| 操作步驟 | 4+ | 2-3 |
| 視覺複雜度 | 高 | 低 |
| 使用者吸引力 | 普通 | 優秀 |
| 操作清晰度 | 混亂 | 直觀 |

## 下一步行動項目
1. 測試完整流程（新增 → 列表 → 追蹤）
2. 完善計畫生成算法
3. 實作成就系統
4. 整合 GUN.js 資料同步
5. 建立單元測試框架

## 待解決問題
1. ~~資料儲存 key 不一致~~ ✅ 已解決（統一使用 betterme:goals）
2. 計畫生成邏輯需要完善
3. 進度圖表視覺化
4. 測試框架尚未建立
5. GUN.js 同步未實現

## 注意事項
- 所有新功能應先寫測試（TDD）
- 保持程式碼簡潔，避免過度工程
- 優先解決使用者體驗問題
- 確保跨瀏覽器相容性
- 保護用戶隱私和資料安全